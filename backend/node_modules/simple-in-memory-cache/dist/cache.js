"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createCache = void 0;
const getMseNow = () => new Date().getTime();
exports.createCache = ({ defaultSecondsUntilExpiration = 5 * 60 } = {}) => {
    // initialize a fresh in-memory cache object
    const cache = {};
    // define how to set an item into the cache
    const set = (key, value, { secondsUntilExpiration = defaultSecondsUntilExpiration } = {}) => {
        const expiresAtMse = getMseNow() + secondsUntilExpiration * 1000;
        cache[key] = { value, expiresAtMse };
    };
    // define how to get an item from the cache
    const get = (key) => {
        const cacheContent = cache[key];
        if (!cacheContent)
            return undefined; // if not in cache, then undefined
        if (cacheContent.expiresAtMse < getMseNow())
            return undefined; // if already expired, then undefined
        return cacheContent.value; // otherwise, its in the cache and not expired, so return the value
    };
    // return the api
    return { set, get };
};
//# sourceMappingURL=cache.js.map